(this["webpackJsonplearning-anilist-api"]=this["webpackJsonplearning-anilist-api"]||[]).push([[0],{158:function(e,t,n){},159:function(e,t,n){},165:function(e,t,n){},276:function(e,t,n){},279:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a,c,r,i=n(1),s=n.n(i),o=n(64),l=n.n(o),j=n(301),u=n(137),d=(n(158),n.p,n(159),n(19)),b=n(14),x=n(48),O=n(105),g=n(151),h=n(291),m=n(292),f=n(136),p=n(297),v=n(138),C=n(296),y=n(101),k=n(10),I=n.n(k),N=n(135),S=n(79),D=n(299),E=n(303),F=n(51),P=(n(165),n(302)),B=n(298),R=n(294),A=n(295),q=n(150),M=n(140),T=n(2);function $(e){var t=s.a.useState("Madoka Magica"),n=Object(b.a)(t,2),a=n[0],c=n[1],r=s.a.useState("Anime"),i=Object(b.a)(r,2),o=i[0],l=i[1];return Object(T.jsxs)(h.a,{className:"QueryContainer",fluid:!0,children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(f.a,{children:Object(T.jsx)(Q,{queryType:o,submitFunction:c,setQueryType:l})})}),Object(T.jsx)(m.a,{children:Object(T.jsx)(f.a,{children:Object(T.jsx)(w,{queryType:o,searchString:a,handleImageClick:e.handleImageClick})})})]})}function w(e){var t=Object(i.useState)(1),n=Object(b.a)(t,2),s=n[0],o=n[1];Object(i.useEffect)((function(){o(1)}),[e]);var l=function(e,t,n){console.log(t);var i={search:e,perPage:25,page:n},s=Object(F.gql)(a||(a=Object(S.a)([""])));return s="Anime"==t?Object(F.gql)(c||(c=Object(S.a)(["\n\t  query AnimeCharacters($search: String $page: Int){\n   Media(search:$search, type: ANIME){\n     characters(sort: ROLE, page: $page, perPage: 25) {\n\t   pageInfo{\n\t\t   total\n\t\t   lastPage\n\t   },\n       nodes {\n         id,\n         name {\n             full\n         },\n         image {\n           large\n         },\n       }\n     }\n   }\n }\n\t  "]))):Object(F.gql)(r||(r=Object(S.a)(["\n  \t  query Characters($search: String, $perPage: Int, $page: Int){\n  \t  Page(page: $page, perPage: $perPage){\n  \t    pageInfo{\n  \t      total\n  \t      currentPage\n\t\t  lastPage\n  \t    }\n  \t    characters(search:$search){\n  \t\t  id\n  \t      name {\n  \t        last\n  \t        first\n  \t\t\tfull\n  \t      }\n  \t      image {\n  \t        large\n  \t      }\n  \t    }\n  \t  }\n  \t}\n  \t  "]))),Object(E.a)(["characters",i,t],Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.request)("https://graphql.anilist.co",s,i);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))))}(e.searchString,e.queryType,s),j=l.status,u=l.data,O=l.error,g=(l.isFetching,l.isSuccess,[]),p=1;return u&&("Anime"==e.queryType?u.Media&&(g=Object(d.a)(u.Media.characters.nodes),p=u.Media.characters.pageInfo.lastPage,console.log("Pages: "+p)):u.Page&&(g=Object(d.a)(u.Page.characters),p=u.Page.pageInfo.lastPage,console.log("Pages: "+p))),Object(T.jsxs)(h.a,{className:"CharacterBar",children:[Object(T.jsx)(m.a,{xs:"auto",xl:"auto",className:"CharacterBarRow",children:Object(T.jsx)(f.a,{fluid:!0,children:"loading"===j?"Loading...":"error"===j?Object(T.jsxs)("span",{children:["Error: ",O.message]}):Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(m.a,{className:"CharacterBarRow",children:g.map((function(e,t){return Object(T.jsx)(f.a,{xl:"auto",xs:"auto",children:Object(T.jsxs)(P.a,{bg:"black",className:"CharCard",children:[Object(T.jsx)(L,{url:e.image.large,name:e.name.full,id:e.id,index:t}),Object(T.jsx)("span",{className:"CharName",children:e.name.full})]})},e.id)}))})})})}),Object(T.jsxs)(m.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)(v.a,{variant:"outline-secondary",onClick:function(){return s>1?o(s-1):null},children:Object(T.jsx)(x.a,{})})}),Object(T.jsx)(f.a,{children:Object(T.jsx)(v.a,{variant:"outline-secondary",onClick:function(){return s<p?o(s+1):null},children:Object(T.jsx)(x.b,{})})})]})]})}function L(e){var t=e.url,n=e.name,a=e.index,c=e.id,r=Object(D.a)((function(){return{type:"image",item:{id:c,name:n,url:t},collect:function(e){return{isDragging:e.isDragging()}}}})),i=Object(b.a)(r,2),s=(i[0].isDragging,i[1]);return Object(T.jsx)("div",{ref:s,children:Object(T.jsx)("img",{className:"CharImg",src:t,alt:n,index:a,rounded:!0,fluid:!0},c)})}function Q(e){var t=s.a.useState("Madoka Magica"),n=Object(b.a)(t,2),a=n[0],c=n[1];return Object(T.jsx)(h.a,{className:"searchBarContainer",children:Object(T.jsx)(B.a,{onSubmit:function(t){t.preventDefault(),e.submitFunction(a)},children:Object(T.jsxs)(R.a,{className:"mb-3",children:[Object(T.jsxs)(A.a,{title:e.queryType,variant:"outline-secondary",id:"input-group-dropdown-1",onSelect:function(t){return e.setQueryType(t)},children:[Object(T.jsx)(q.a.Item,{eventKey:"Anime",children:"Anime"}),Object(T.jsx)(q.a.Item,{eventKey:"Character",children:"Character"})]}),Object(T.jsx)(M.a,{value:a,onChange:function(e){c(e.target.value)}})]})})})}var W=n(300),z=n(149);n(276),n(277);function J(e){var t=Object(i.useState)([]),n=Object(b.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!1),s=Object(b.a)(r,2);s[0],s[1];function o(t,n,r){if(t.barIndex==e.barIndex){var i=o.index;console.log("from: "+i+" to: "+n);var s=Object(d.a)(a),o=s[i];s.splice(i,1),s.splice(n,0,o),c((function(e){return[s]}))}}var l=Object(i.useCallback)((function(e){console.log("Removing Image at Index "+e+" "+a[e].name),c((function(t){return[].concat(Object(d.a)(t.slice(0,e)),Object(d.a)(t.slice(e+1)))}))}),[a]),j=Object(W.a)((function(){return{accept:"image",drop:function(e,t){return function(e,t,n,a){if(e&&t&&n){var r={id:n,name:t,url:e};console.log("url: "+e+" id: "+n+" name: "+t),c((function(e){return[].concat(Object(d.a)(e),[r])}))}}(e.url,e.name,e.id,e.barIndex)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),u=Object(b.a)(j,2),x=u[0],O=x.canDrop,g=x.isOver,h=u[1],m="black";return O&&g?m="#3fe74b":O&&(m="#3f92e7"),Object(T.jsx)("div",{ref:h,style:{backgroundColor:m},children:Object(T.jsxs)("div",{className:"RankingBar",children:[Object(T.jsx)("div",{className:"RankBoxCol",children:Object(T.jsx)(K,{color:e.color,index:e.index,handleChange:e.handleBoxChange,text:e.text})}),Object(T.jsx)("div",{className:"RankingImagesWrapper",children:a.map((function(e,t){return Object(T.jsx)("div",{className:"RankingImgWrapper",children:Object(T.jsx)(G,{url:e.url,name:e.name,barIndex:t,index:t,dropItem:o,handleRemove:l,id:e.id})},t)}))})]})})}function K(e){var t=Object(i.useState)(e.color),n=Object(b.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(e.text),s=Object(b.a)(r,2),o=s[0],l=s[1],j=Object(i.useState)(30),u=Object(b.a)(j,2),d=u[0],x=u[1];var O=Object(i.useState)(!1),g=Object(b.a)(O,2),h=g[0],m=g[1];return h?Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"RankBox",style:{backgroundColor:a,fontSize:d+"px"},onClick:function(){return m(!1)},children:o}),Object(T.jsxs)("div",{children:[Object(T.jsxs)(R.a,{children:[Object(T.jsx)(M.a,{value:o,className:"boxTextInput",onChange:function(e){l(e.target.value)}}),Object(T.jsx)(M.a,{value:d,type:"number",className:"boxFontInput",onChange:function(e){x(e.target.value)}}),Object(T.jsx)(R.a.Text,{id:"inputGroup-sizing-sm",children:"px"})]}),Object(T.jsx)(z.a,{color:a,onChange:function(e,t){c(e.hex)},presetColors:["#ED254E","#FE9000","#FFDD4A","#59CD90","#4C5760"]})]})]}):Object(T.jsx)("div",{className:"RankBox",style:{backgroundColor:a,fontSize:d+"px"},onClick:function(){return m(!0)},children:o})}function G(e){var t=e.url,n=e.name,a=e.index,c=e.id,r=e.barIndex,s=Object(i.useState)({display:"none"}),o=Object(b.a)(s,2),l=o[0],j=o[1],u=Object(D.a)((function(){return{type:"image",item:{id:c,name:n,url:t,index:a,barIndex:r},end:function(t,n){e.handleRemove(a)},collect:function(e){return{isDragging:e.isDragging()}}}}),[e]),d=Object(b.a)(u,2),x=(d[0].isDragging,d[1]);return Object(T.jsxs)("div",{ref:x,onMouseEnter:function(e){j({display:"block"})},onMouseLeave:function(e){j({display:"none"})},className:"RankingImgWrapper",children:[Object(T.jsx)("img",{src:t,className:"RankingImg",alt:n,index:a},c),Object(T.jsx)("button",{style:l,className:"DltButton",onClick:function(){return e.handleRemove(a)},children:"X"})]})}var X=n(148),H=n.n(X),U=(n(279),function(){var e=Object(i.useState)([{color:"#ED254E",text:"S"},{color:"#FE9000",text:"A"},{color:"#FFDD4A",text:"B"},{color:"#59CD90",text:"C"},{color:"#4C5760",text:"D"}]),t=Object(b.a)(e,2),n=t[0],a=t[1];function c(e,t,c){var r=Object(d.a)(n);r[e]={color:t,text:c},a((function(e){return Object(d.a)(r)}))}return Object(T.jsx)(C.a,{backend:y.a,children:Object(T.jsx)(h.a,{fluid:!0,children:Object(T.jsxs)(m.a,{children:[Object(T.jsx)(f.a,{md:"auto",className:"QueryColumn",children:Object(T.jsx)($,{})}),Object(T.jsxs)(f.a,{className:"ChartContainer",children:[Object(T.jsx)("div",{className:"ChartContainerBarsWrapper",children:Object(T.jsx)("div",{id:"ScreenshotElement",children:n.map((function(e,t){return Object(T.jsx)(m.a,{children:Object(T.jsx)(f.a,{children:Object(T.jsx)(J,{color:e.color,text:e.text,index:t,handleBoxChange:c})})},t)}))})}),Object(T.jsx)(m.a,{className:"justify-content-md-end",children:Object(T.jsx)(f.a,{md:"auto",children:Object(T.jsxs)(p.a,{className:"mr-4 pt-4",children:[Object(T.jsx)(v.a,{variant:"outline-secondary",onClick:function(){return function(){var e;switch(n.length){case 0:e={color:"#ED254E",text:"S"};break;case 1:e={color:"#FE9000",text:"A"};break;case 2:e={color:"#FFDD4A",text:"B"};break;case 3:e={color:"#59CD90",text:"C"};break;case 4:e={color:"#4C5760",text:"D"};break;default:e={color:"#4C5760",text:n.length<26?String.fromCharCode(65+n.length):"?"}}a((function(t){return[].concat(Object(d.a)(t),[e])}))}()},children:Object(T.jsx)(O.b,{})}),Object(T.jsx)(v.a,{variant:"outline-secondary",onClick:function(){return function(){var e=Object(d.a)(n);e.pop(),a((function(t){return Object(d.a)(e)}))}()},children:Object(T.jsx)(x.c,{})}),Object(T.jsx)(v.a,{onClick:function(){return Object(g.a)(document.getElementById("ScreenshotElement")).then((function(e){H()(e,"chart.png")}))},variant:"outline-secondary",children:Object(T.jsx)(O.a,{})})]})})})]})]})})})});var V=function(){return Object(T.jsx)("div",{className:"App",children:Object(T.jsx)(U,{})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,304)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Z=(n(280),new j.a);l.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(u.a,{client:Z,children:Object(T.jsx)(V,{})})}),document.getElementById("root")),Y()}},[[282,1,2]]]);
//# sourceMappingURL=main.e36245bf.chunk.js.map