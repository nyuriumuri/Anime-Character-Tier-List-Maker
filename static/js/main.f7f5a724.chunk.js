(this["webpackJsonplearning-anilist-api"]=this["webpackJsonplearning-anilist-api"]||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){},166:function(e,t,n){},277:function(e,t,n){},281:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var a,c,r,i=n(1),s=n.n(i),o=n(63),l=n.n(o),j=n(303),u=n(139),b=(n(159),n.p,n(160),n(18)),d=n(15),x=n(48),O=n(105),g=n(152),h=n(135),m=n(136),f=n.n(m),p=n(293),v=n(294),C=n(138),y=n(299),k=n(140),I=n(298),N=n(100),S=n(101),D=n.n(S),B=n(137),E=n(78),F=n(301),P=n(305),R=n(51),A=(n(166),n(304)),q=n(300),M=n(296),w=n(297),T=n(151),$=n(142),L=n(2);function Q(e){var t=s.a.useState("Madoka Magica"),n=Object(d.a)(t,2),a=n[0],c=n[1],r=s.a.useState("Anime"),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(L.jsxs)(p.a,{className:"QueryContainer",fluid:!0,children:[Object(L.jsx)(v.a,{children:Object(L.jsx)(C.a,{children:Object(L.jsx)(J,{queryType:o,submitFunction:c,setQueryType:l})})}),Object(L.jsx)(v.a,{children:Object(L.jsx)(C.a,{children:Object(L.jsx)(W,{queryType:o,searchString:a,handleImageClick:e.handleImageClick})})})]})}function W(e){var t=Object(i.useState)(1),n=Object(d.a)(t,2),s=n[0],o=n[1];Object(i.useEffect)((function(){o(1)}),[e]);var l=function(e,t,n){console.log(t);var i={search:e,perPage:25,page:n},s=Object(R.gql)(a||(a=Object(E.a)([""])));return s="Anime"==t?Object(R.gql)(c||(c=Object(E.a)(["\n\t  query AnimeCharacters($search: String $page: Int){\n   Media(search:$search, type: ANIME){\n     characters(sort: ROLE, page: $page, perPage: 25) {\n\t   pageInfo{\n\t\t   total\n\t\t   lastPage\n\t   },\n       nodes {\n         id,\n         name {\n             full\n         },\n         image {\n           large\n         },\n       }\n     }\n   }\n }\n\t  "]))):Object(R.gql)(r||(r=Object(E.a)(["\n  \t  query Characters($search: String, $perPage: Int, $page: Int){\n  \t  Page(page: $page, perPage: $perPage){\n  \t    pageInfo{\n  \t      total\n  \t      currentPage\n\t\t  lastPage\n  \t    }\n  \t    characters(search:$search){\n  \t\t  id\n  \t      name {\n  \t        last\n  \t        first\n  \t\t\tfull\n  \t      }\n  \t      image {\n  \t        large\n  \t      }\n  \t    }\n  \t  }\n  \t}\n  \t  "]))),Object(P.a)(["characters",i,t],Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.request)("https://graphql.anilist.co",s,i);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))))}(e.searchString,e.queryType,s),j=l.status,u=l.data,O=l.error,g=(l.isFetching,l.isSuccess,[]),h=1;return u&&("Anime"==e.queryType?u.Media&&(g=Object(b.a)(u.Media.characters.nodes),h=u.Media.characters.pageInfo.lastPage,console.log("Pages: "+h)):u.Page&&(g=Object(b.a)(u.Page.characters),h=u.Page.pageInfo.lastPage,console.log("Pages: "+h))),Object(L.jsxs)(p.a,{className:"CharacterBar",children:[Object(L.jsx)(v.a,{xs:"auto",xl:"auto",className:"CharacterBarRow",children:Object(L.jsx)(C.a,{fluid:!0,children:"loading"===j?"Loading...":"error"===j?Object(L.jsxs)("span",{children:["Error: ",O.message]}):Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(v.a,{className:"CharacterBarRow",children:g.map((function(e,t){return Object(L.jsx)(C.a,{xl:"auto",xs:"auto",children:Object(L.jsxs)(A.a,{bg:"black",className:"CharCard",children:[Object(L.jsx)(z,{url:e.image.large,name:e.name.full,id:e.id,index:t}),Object(L.jsx)("span",{className:"CharName",children:e.name.full})]})},e.id)}))})})})}),Object(L.jsxs)(v.a,{children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(k.a,{variant:"outline-secondary",onClick:function(){return s>1?o(s-1):null},children:Object(L.jsx)(x.a,{})})}),Object(L.jsx)(C.a,{children:Object(L.jsx)(k.a,{variant:"outline-secondary",onClick:function(){return s<h?o(s+1):null},children:Object(L.jsx)(x.b,{})})})]})]})}function z(e){var t=e.url,n=e.name,a=e.index,c=e.id,r=Object(F.a)((function(){return{type:"image",item:{id:c,name:n,url:t},collect:function(e){return{isDragging:e.isDragging()}}}})),i=Object(d.a)(r,2),s=(i[0].isDragging,i[1]);return Object(L.jsx)("div",{ref:s,children:Object(L.jsx)("img",{className:"CharImg",src:t,alt:n,index:a},c)})}function J(e){var t=s.a.useState("Madoka Magica"),n=Object(d.a)(t,2),a=n[0],c=n[1];return Object(L.jsx)(p.a,{className:"searchBarContainer",children:Object(L.jsx)(q.a,{onSubmit:function(t){t.preventDefault(),e.submitFunction(a)},children:Object(L.jsxs)(M.a,{className:"mb-3",children:[Object(L.jsxs)(w.a,{title:e.queryType,variant:"outline-secondary",id:"input-group-dropdown-1",onSelect:function(t){return e.setQueryType(t)},children:[Object(L.jsx)(T.a.Item,{eventKey:"Anime",children:"Anime"}),Object(L.jsx)(T.a.Item,{eventKey:"Character",children:"Character"})]}),Object(L.jsx)($.a,{value:a,onChange:function(e){c(e.target.value)}})]})})})}var K=n(302),G=n(150);n(277),n(278);function X(e){var t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!1),s=Object(d.a)(r,2);s[0],s[1];function o(t,n,r){if(t.barIndex==e.barIndex){var i=o.index;console.log("from: "+i+" to: "+n);var s=Object(b.a)(a),o=s[i];s.splice(i,1),s.splice(n,0,o),c((function(e){return[s]}))}}var l=Object(i.useCallback)((function(e){console.log("Removing Image at Index "+e+" "+a[e].name),c((function(t){return[].concat(Object(b.a)(t.slice(0,e)),Object(b.a)(t.slice(e+1)))}))}),[a]),j=Object(K.a)((function(){return{accept:"image",drop:function(e,t){return function(e,t,n,a){if(e&&t&&n){var r={id:n,name:t,url:e};console.log("url: "+e+" id: "+n+" name: "+t),c((function(e){return[].concat(Object(b.a)(e),[r])}))}}(e.url,e.name,e.id,e.barIndex)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),u=Object(d.a)(j,2),x=u[0],O=x.canDrop,g=x.isOver,h=u[1],m="black";return O&&g?m="#3fe74b":O&&(m="#3f92e7"),Object(L.jsx)("div",{ref:h,style:{backgroundColor:m},children:Object(L.jsxs)("div",{className:"RankingBar",children:[Object(L.jsx)("div",{className:"RankBoxCol",children:Object(L.jsx)(H,{color:e.color,index:e.index,handleChange:e.handleBoxChange,text:e.text})}),Object(L.jsx)("div",{className:"RankingImagesWrapper",children:a.map((function(e,t){return Object(L.jsx)("div",{className:"RankingImgWrapper",children:Object(L.jsx)(U,{url:e.url,name:e.name,barIndex:t,index:t,dropItem:o,handleRemove:l,id:e.id})},t)}))})]})})}function H(e){var t=Object(i.useState)(e.color),n=Object(d.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(e.text),s=Object(d.a)(r,2),o=s[0],l=s[1],j=Object(i.useState)(30),u=Object(d.a)(j,2),b=u[0],x=u[1];var O=Object(i.useState)(!1),g=Object(d.a)(O,2),h=g[0],m=g[1];return h?Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"RankBox",style:{backgroundColor:a,fontSize:b+"px"},onClick:function(){return m(!1)},children:o}),Object(L.jsxs)("div",{children:[Object(L.jsxs)(M.a,{children:[Object(L.jsx)($.a,{value:o,className:"boxTextInput",onChange:function(e){l(e.target.value)}}),Object(L.jsx)($.a,{value:b,type:"number",className:"boxFontInput",onChange:function(e){x(e.target.value)}}),Object(L.jsx)(M.a.Text,{id:"inputGroup-sizing-sm",children:"px"})]}),Object(L.jsx)(G.a,{color:a,onChange:function(e,t){c(e.hex)},presetColors:["#ED254E","#FE9000","#FFDD4A","#59CD90","#4C5760"]})]})]}):Object(L.jsx)("div",{className:"RankBox",style:{backgroundColor:a,fontSize:b+"px"},onClick:function(){return m(!0)},children:o})}function U(e){var t=e.url,n=e.name,a=e.index,c=e.id,r=e.barIndex,s=Object(i.useState)({display:"none"}),o=Object(d.a)(s,2),l=o[0],j=o[1],u=Object(F.a)((function(){return{type:"image",item:{id:c,name:n,url:t,index:a,barIndex:r},end:function(t,n){e.handleRemove(a)},collect:function(e){return{isDragging:e.isDragging()}}}}),[e]),b=Object(d.a)(u,2),x=(b[0].isDragging,b[1]);return Object(L.jsxs)("div",{ref:x,onMouseEnter:function(e){j({display:"block"})},onMouseLeave:function(e){j({display:"none"})},className:"RankingImgWrapper",children:[Object(L.jsx)("img",{src:t,className:"RankingImg",alt:n,index:a},c),Object(L.jsx)("button",{style:l,className:"DltButton",onClick:function(){return e.handleRemove(a)},children:"X"})]})}n(280),n(281);var V=function(){var e=Object(i.useState)([{color:"#ED254E",text:"S"},{color:"#FE9000",text:"A"},{color:"#FFDD4A",text:"B"},{color:"#59CD90",text:"C"},{color:"#4C5760",text:"D"}]),t=Object(d.a)(e,2),n=t[0],a=t[1];function c(e,t,c){var r=Object(b.a)(n);r[e]={color:t,text:c},a((function(e){return Object(b.a)(r)}))}return Object(L.jsx)(I.a,{backend:"ontouchstart"in window?g.a:N.a,children:Object(L.jsx)(p.a,{fluid:!0,children:Object(L.jsxs)(v.a,{children:[Object(L.jsx)(C.a,{md:"auto",className:"QueryColumn",children:Object(L.jsx)(Q,{})}),Object(L.jsxs)(C.a,{className:"ChartContainer",children:[Object(L.jsx)("div",{className:"ChartContainerBarsWrapper",children:Object(L.jsx)("div",{id:"ScreenshotElement",children:n.map((function(e,t){return Object(L.jsx)(v.a,{children:Object(L.jsx)(C.a,{children:Object(L.jsx)(X,{color:e.color,text:e.text,index:t,handleBoxChange:c})})},t)}))})}),Object(L.jsx)(v.a,{className:"justify-content-md-end",children:Object(L.jsx)(C.a,{md:"auto",children:Object(L.jsxs)(y.a,{className:"mr-4 pt-4",children:[Object(L.jsx)(k.a,{variant:"outline-secondary",onClick:function(){return function(){var e;switch(n.length){case 0:e={color:"#ED254E",text:"S"};break;case 1:e={color:"#FE9000",text:"A"};break;case 2:e={color:"#FFDD4A",text:"B"};break;case 3:e={color:"#59CD90",text:"C"};break;case 4:e={color:"#4C5760",text:"D"};break;default:e={color:"#4C5760",text:n.length<26?String.fromCharCode(64+n.length):"?"}}a((function(t){return[].concat(Object(b.a)(t),[e])}))}()},children:Object(L.jsx)(O.b,{})}),Object(L.jsx)(k.a,{variant:"outline-secondary",onClick:function(){return function(){var e=Object(b.a)(n);e.pop(),a((function(t){return Object(b.a)(e)}))}()},children:Object(L.jsx)(x.c,{})}),Object(L.jsx)(k.a,{onClick:function(){return f.a.toBlob(document.getElementById("ScreenshotElement")).then((function(e){Object(h.saveAs)(e,"chart.png")}))},variant:"outline-secondary",children:Object(L.jsx)(O.a,{})})]})})})]})]})})})};var Y=function(){return Object(L.jsx)("div",{className:"App",children:Object(L.jsx)(V,{})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,306)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},_=(n(282),new j.a);l.a.render(Object(L.jsx)(s.a.StrictMode,{children:Object(L.jsx)(u.a,{client:_,children:Object(L.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[284,1,2]]]);
//# sourceMappingURL=main.f7f5a724.chunk.js.map